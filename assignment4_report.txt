ОТЧЕТ ПО ЗАДАНИЮ 4: РАЗДЕЛЕНИЕ НА УПРАВЛЯЮЩИЙ И ОПЕРАЦИОННЫЙ АВТОМАТЫ
====================================================================

1. ВЫПОЛНЕННАЯ РАБОТА:
   Переработан модуль передатчика (transmitter_fsm.v) с явным разделением на:
   - Управляющий автомат (Control Unit, CU)
   - Операционный автомат (Data Path, DP)

2. АРХИТЕКТУРА РАЗДЕЛЕНИЯ:

   +-------------------+       Управляющие        +-------------------+
   |  УПРАВЛЯЮЩИЙ      | -----------------------> |  ОПЕРАЦИОННЫЙ    |
   |  АВТОМАТ (CU)     |       сигналы            |  АВТОМАТ (DP)     |
   |                   | <------------------------ |                   |
   |  - Состояния      |       Сигналы обратной   |  - Регистры       |
   |  - Логика переходов|       связи             |  - Счетчики       |
   |  - Генерация      |                          |  - АЛУ            |
   |    упр. сигналов  |                          |  - Матрица        |
   +-------------------+                          +-------------------+

3. УПРАВЛЯЮЩИЙ АВТОМАТ (Control Unit):

   а) Состояния (6 состояний):
      - CU_IDLE (000)       - состояние покоя
      - CU_START_BIT (001)  - передача стартового бита
      - CU_DATA_BITS (010)  - передача битов данных
      - CU_PARITY_BIT (011) - передача бита четности (если включено)
      - CU_STOP_BIT (100)   - передача стопового бита
      - CU_NEXT_CELL (101)  - выбор следующей ячейки

   б) Управляющие сигналы (генерируются для операционного автомата):
      1. cu_load_matrix        - загрузить данные в матрицу
      2. cu_start_transmission - начать передачу
      3. cu_load_shift_reg     - загрузить данные в сдвиговый регистр
      4. cu_shift_enable       - разрешить сдвиг данных
      5. cu_update_bit_counter - увеличить счетчик битов
      6. cu_update_div_counter - увеличить счетчик делителя
      7. cu_update_cell_indices- обновить индексы ячейки
      8. cu_reset_counters     - сбросить счетчики
      9. cu_calculate_parity   - вычислить бит четности
      10. cu_set_tx_start      - установить tx в 0 (старт-бит)
      11. cu_set_tx_data       - установить tx в данные
      12. cu_set_tx_parity     - установить tx в бит четности
      13. cu_set_tx_stop       - установить tx в 1 (стоп-бит)
      14. cu_set_busy          - установить busy в 1
      15. cu_clear_busy        - установить busy в 0

   в) Логика работы:
      - Комбинационная часть: вычисление следующего состояния и управляющих сигналов
      - Последовательная часть: регистр состояния (синхронизация по тактовому сигналу)

4. ОПЕРАЦИОННЫЙ АВТОМАТ (Data Path):

   а) Регистры:
      - Матрица 2x4: dp_M00..dp_M03, dp_M10..dp_M13
      - Сдвиговый регистр: dp_shift_reg
      - Счетчики: dp_bit_counter, dp_div_counter
      - Регистры состояния: dp_parity_bit, dp_tx_row, dp_tx_col, dp_tx_action
      - Счетчики ячеек: dp_cells_to_send, dp_cells_sent
      - Выходные регистры: dp_tx, dp_busy, dp_cell

   б) Сигналы обратной связи (от DP к CU):
      - dp_div_max   - счетчик делителя достиг максимума (DIV-1)
      - dp_bit_max   - счетчик битов достиг максимума (W-1)
      - dp_cells_done - все ячейки переданы

   в) Логика работы:
      - Выполнение операций по управляющим сигналам от CU
      - Обновление регистров по тактовому сигналу
      - Вычисление сигналов обратной связи

5. ПРЕИМУЩЕСТВА РАЗДЕЛЕННОЙ АРХИТЕКТУРЫ:

   а) Модульность и повторное использование:
      - Управляющий автомат можно модифицировать независимо от операционного
      - Операционный автомат можно использовать с другими управляющими автоматами

   б) Упрощение проектирования и отладки:
      - Четкое разделение ответственности
      - Проще анализировать и тестировать отдельные компоненты

   в) Гибкость:
      - Легко добавлять новые состояния в управляющий автомат
      - Легко модифицировать обработку данных в операционном автомате

6. РЕАЛИЗАЦИЯ В VERILOG:

   а) Управляющий автомат реализован в двух always-блоках:
      - Комбинационный: вычисление следующего состояния и управляющих сигналов
      - Последовательный: синхронизация состояния по тактовому сигналу

   б) Операционный автомат реализован в одном always-блоке:
      - Обработка всех управляющих сигналов
      - Обновление всех регистров

7. ПРОВЕРКА РАБОТОСПОСОБНОСТИ:

   Создан тестовый модуль test_fsm_transmitter.v, который проверяет:
   - Запись данных в матрицу (action=1)
   - Передачу одной ячейки (action=2)
   - Передачу строки матрицы (action=3)
   - Корректность работы управляющих сигналов
   - Синхронизацию между управляющим и операционным автоматами

8. ИСХОДНЫЕ ФАЙЛЫ:

   - transmitter_fsm.v        - передатчик с разделением автоматов
   - test_fsm_transmitter.v   - тестовый модуль
   - assignment4_report.txt   - данный отчет

9. ВЫВОДЫ:

   Разделение на управляющий и операционный автоматы успешно реализовано
   в модуле передатчика. Архитектура соответствует методологии проектирования
   цифровых систем и обеспечивает все преимущества разделенного подхода.

Дата создания: $(date)
